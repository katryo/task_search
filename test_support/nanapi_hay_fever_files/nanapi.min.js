var NanapiMethod={number_format:function(num){return num.toString().replace(/([0-9]+?)(?=(?:[0-9]{3})+$)/g,'$1,')}};;var NanapiAutoRequest={init:function(context){var configs=[];$(context).each(function(){var config={url:$(this).data('auto-request-url'),type:$(this).data('auto-request-method')?$(this).data('auto-request-method'):'post',content:$(this).data('auto-request-content-for')?$(this).data('auto-request-content-for'):'textarea'};configs[configs.length]=config;NanapiAutoRequest.watch(configs);});},watch:function(configs){setInterval(function(){$(configs).each(function(i,config){NanapiAutoRequest.post(config);});},30000);},post:function(config){var data={};$(config['content']).each(function(){var type=$(this).attr('type');var name=$(this).attr('name');switch(type){case'text':case'hidden':default:var v=$(this).val();break;}
data[name]=v;});$.ajax({data:data,dataType:'json',url:config['url'],type:config['type'],success:function(response){},error:function(response){},complete:function(response){}});}};;var NanapiWidget={load:function(context){var widgets=[];var widget_elms=[];$('.bindWidget',context).each(function(){var widget={name:$(this).data('widget-name'),param:$(this).data('widget-param'),cache:$(this).data('widget-cache'),version:$(this).data('widget-version'),callback:$(this).data('widget-callback')};if(widget['cache']){var cache=NanapiWidget.cache_read(widget['name']+$(this).attr('data-widget-param'),widget['version']);if(cache){NanapiWidget.apply(this,widget,cache);return;}}
widget_elms[widget_elms.length]=this;widgets[widgets.length]=widget;});$.ajax({type:'post',url:'/rapid/widgets/load',data:{widgets:widgets,referrer:document.referrer?document.referrer:''},cache:false,dataType:'json',success:function(result){$(widgets).each(function(i,widget){NanapiWidget.apply(widget_elms[i],widget,result[i]);if(widget['cache']){NanapiWidget.cache_write(result[i],widget['name']+$(widget_elms[i]).attr('data-widget-param'),widget['version'],widget['cache']);}});}});},apply:function(elm,data,html){if($(elm).data('widget-replace')=='inner'){$(elm).html(html);}else{$(elm).replaceWith(html);}
if(data['callback']){eval(data['callback']+'(data, elm);');}},cache_storage_prefix:'nanapi_widget_cache_',cache_storage_key:function(key){return location.protocol+this.cache_storage_prefix+key;},cache_read:function(key,version){if(typeof sessionStorage=='undefined'||typeof JSON=='undefined')return false;if(location.search.match('cacheclear=1'))return false;try{var cache=JSON.parse(sessionStorage[this.cache_storage_key(key)]);if(!cache)return false;var now=new Date/1e3|0;return cache['expire']>now&&cache['version']==version?cache['data']:false;}catch(e){return false;}},cache_write:function(data,key,version,lifetimesec){if(typeof sessionStorage=='undefined'||typeof JSON=='undefined')return false;sessionStorage[this.cache_storage_key(key)]=JSON.stringify({data:data,version:version,expire:(new Date/1e3|0)+lifetimesec});return true;}};;var Nanapi={fb_parse:function(context){if(navigator.userAgent.match(/MSIE (6|7)/))return false;if(typeof FB=='undefined'){setTimeout(function(){Nanapi.fb_parse(context);},200);return true;}
FB.XFBML.parse(context);return true;},recipe_parse:function(context){$('.dynamic',context).each(function(i,v){var elm=$(v);var replaceTo='';switch(elm.data('dynamic')){case'recipe-block':var title=elm.data('title')?elm.data('title'):'';replaceTo='<iframe src="//nanapi.jp/rapid/title/block/'+elm.data('id')+'?title='+encodeURIComponent(title)+'" scrolling="no" frameborder="0" allowtransparency="true"></iframe>';elm.replaceWith(replaceTo);break;case'document-block':replaceTo='<iframe src="//docs.google.com/viewer?url='+encodeURIComponent(elm.data('url'))+'&amp;embedded=true" height="400" style="width:100%; border: none;"></iframe>';elm.replaceWith(replaceTo);break;}});},get_document:function(title_id,version,callback){var url='/webapi/document/'+title_id+'/'+version;$.ajax({type:'get',async:true,url:url,dataType:'json',success:function(data){callback(data);}});},get_tweet_count:function(href){var url='http://urls.api.twitter.com/1/urls/count.json?url='+escape(href)+'&callback=Nanapi.set_count_twitter';$.getScript(url);},set_count_twitter:function(json){var fixedUrl=json.url.replace(/\/$/,'');$('.bindTweetCnt').each(function(){if(fixedUrl==$(this).data('href').replace(/\/$/,'')){$(this).text(json.count);if(parseInt($(this).data('count'))<json.count){$.ajax({type:'post',url:'/webapi/tweet_count_increment',data:json,cache:false,dataType:'json'});}}});},log:function(arg){if(typeof console!='undefined'){console.log(arg);}},widget_load:function(context){NanapiWidget.load(context);},megadropdown_set_top:function(){var base_top=$('.bindMegadropdownL').first().offset().top;$('.bindMegadropdownL').each(function(){var current_top=$(this).offset().top;var diff_top=parseInt(base_top)-parseInt(current_top)-30;$('.bindMegadropdownTLB',this).attr('style',function(){return"top:"+diff_top+"px;";});});},megadropdown_list_hover:function(){$('.bindMegadropdownB').stop(true,true).slideDown(200);Nanapi.megadropdown_set_top();var X,Y;$('.bindMegadropdownL').hover(function(e){if(X&&Y){var s=Nanapi.relative_on_mousemove(X,Y,e.clientX,e.clientY);switch(s){case'up':case'down':default:$('.bindMegadropdownL').removeClass($(this).data('toggle-class'));$('.bindMegadropdownTLB').hide();$(this).addClass($(this).data('toggle-class'));$('.bindMegadropdownTLB',this).stop().show();case'left':case'right':break;}}else{$(this).addClass($(this).data('toggle-class'));$('.bindMegadropdownTLB',this).stop(true,true).animate({width:'show'},250);}
X=e.clientX,Y=e.clientY;},function(){});X=null,Y=null;},authorized:function(){return $.parseJSON($.ajax({type:'post',url:'/webapi/auth_user',async:false}).responseText);},cookie:function(key,value,options){options=value||{};var decode=options.raw?function(s){return s;}:decodeURIComponent;var pairs=document.cookie.split('; ');for(var i=0,pair;pair=pairs[i]&&pairs[i].split('=');i++){if(decode(pair[0])===key)return decode(pair[1]||'');}
return null;},relative_on_mousemove:function(x1,y1,x2,y2){var x=x2-x1,y=y1-y2;switch(true){case(x>=Math.abs(y)):return'right';break;case((y<=Math.abs(x))&&(Math.abs(y)>=Math.abs(x))):return'down';break;case(y>=Math.abs(x)):return'up';break;case((x<=Math.abs(y))&&(Math.abs(x)>=Math.abs(y))):return'left';break;}},lazyload_image:function(context){$('img',context).each(function(i,v){$(v).attr('src',$(v).data('lazySrc'));});return context;}};;var _mdd=0;var _gaq=_gaq||[];$(function(){(function(){var lazys=$('.bindLazy');if(lazys.length>0){function checkLazy(e){var count=0;var bottom=$(document).scrollTop()+$(window).innerHeight();lazys.each(function(i){var elm=$(this);var type=elm.data('lazy-type')
if(type){if(elm.offset().top<bottom){elm.data('lazy-type',false);switch(type){case'html':elm.html(elm.data('lazy-html'));if(elm.data('lazy-html').match(/<fb:/)){Nanapi.fb_parse(elm.get(0));}
break;case'img':elm.attr('src',elm.data('lazy-img'));break;}}else{count++;}}});if(!count&&e&&e.type=='scroll'){if(window.addEventListener){window.removeEventListener('scroll',checkLazy,false);}else{window.detachEvent('onscroll',checkLazy);}}
if(count&&(!e||e.type=='load')){if(window.addEventListener){window.addEventListener('scroll',checkLazy,false);}else{window.attachEvent('onscroll',checkLazy);}}}
setTimeout(function(){checkLazy();},1);}})();$(document).on('click','.bindMegadropdown',function(){var content=$(this).data('content-for');$.ajax({type:'get',url:'/rapid/ajax/megadropdown',dataType:'html',success:function(result){$(content).last().remove();$(content).after(result);if(_mdd==0){_mdd=1;_gaq.push(['track._trackEvent','Header','MegaDropDown','open dropdown']);$('.bindMegadropdownT').addClass($('.bindMegadropdownT').data('toggle-class'));$('.bindOpenMegadropdown').children().first().removeClass($('.bindOpenMegadropdown').children().first().data('toggle-class'));Nanapi.megadropdown_list_hover();event.stopPropagation();}
$(content).remove();}});});$(document).on('click','html',function(){if(_mdd==1){_mdd=0;_gaq.push(['track._trackEvent','Header','MegaDropDown','close dropdown']);$('.bindMegadropdownTLB').hide();$('.bindMegadropdownB').stop(true,true).hide();$('.bindMegadropdownT').removeClass($('.bindMegadropdownT').data('toggle-class'));$('.bindOpenMegadropdown').children().first().addClass($('.bindOpenMegadropdown').children().first().data('toggle-class'));}});$(document).on('click','.bindOpenMegadropdown',function(event){if(_mdd==0){_mdd=1;_gaq.push(['track._trackEvent','Header','MegaDropDown','open dropdown']);$('.bindMegadropdownT').addClass($('.bindMegadropdownT').data('toggle-class'));$('.bindOpenMegadropdown').children().first().removeClass($('.bindOpenMegadropdown').children().first().data('toggle-class'));Nanapi.megadropdown_list_hover();event.stopPropagation();}});if($('.bindWidget').length>0){NanapiWidget.load(document);}
$('.bindDocumentParse').each(function(){Nanapi.recipe_parse(this);});(function(){var hrefs=[],href_count=0;$('.bindTweetBtn').each(function(){if($.inArray($(this).data('href'),hrefs)==-1){Nanapi.get_tweet_count($(this).data('href'));hrefs[href_count]=$(this).data('href');href_count++;}});})();$(document).on('click','.bindTweetBtn',function(){var self=this,href=$(this).data('href'),title=$(this).data('title');var url='http://twitter.com/share';var D=550,A=450,C=screen.height,B=screen.width,H=Math.round((B/2)-(D/2)),G=0,F=document,E;if(C<A){G=Math.round((C/2)-(A/2))}
var query='?original_referer='+escape(href)+'&text='+encodeURIComponent(title+' @nanapi ')+'&url='+escape(href);window.open(url+query,'','left='+H+',top='+G+',width='+D+',height='+A+',personalbar=0,toolbar=0,scrollbars=1,resizable=1');});$(document).on('click','.bindToggleFavorite',function(){var self=this;var title_id=$(self).data('toggle-favorite-title-id');var num=parseInt($('.bindFavoriteCount',self).text());$.ajax({dataType:"json",data:{"title_id":title_id},url:"/user/favorite_add",success:function(data){var status=parseInt(data.status);switch(status){case 0:$('.bindToggleFavorite').each(function(){if(title_id==$(this).data('toggle-favorite-title-id')){$(this).toggleClass($(this).data('toggle-favorite-toggle-class'));$('.bindFavoriteCount',this).text(num+1);$('.bindToggleFavoriteText',this).text('お気に入り中');}});break;case 1:$('.bindToggleFavorite').each(function(){if(title_id==$(this).data('toggle-favorite-title-id')){$(this).toggleClass($(this).data('toggle-favorite-toggle-class'));$('.bindFavoriteCount',this).text(num-1);$('.bindToggleFavoriteText',this).text('お気に入り追加');}});break;case 2:alert("登録数の上限に達しています！");break;case 8:if(window.confirm('ログインが必要です。ログインしますか？')){location.href="http://nanapi.jp/login/?u="+escape(location.href);}
break;default:alert("システムエラーです。status:"+status);break;}}});});$(document).on('click','.bindTreeToggle',function(){var parentLi=$(this).parents('li').get(0);$(parentLi).toggleClass('open');$('> ul',parentLi).toggle();});$(document).on('click','.bindClickValueFor',function(){if($(this).data('value-for')){$($(this).data('value-for')).val($(this).data('value'));}});$(document).on('click','.bindConfirm',function(){return confirm($(this).data('confirm-message'));});$(document).on('submit','.bindNoDuplicateForm',function(){if($(this).data('no-duplicate-form-status')=='submit'){alert('只今処理中です');return false;}
$(this).data('no-duplicate-form-status','submit');var self=this;setTimeout(function(){$(self).data('no-duplicate-form-status',null);},1000*15);});if($('#fb-root').length>0&&!navigator.userAgent.match(/MSIE (6|7)/)){window.fbAsyncInit=function(){FB.init({appId:'172354142808566',status:false,cookie:true,xfbml:true});FB.Event.subscribe('comment.create',function(resp){Nanapi.log('comment.create');_gaq.push(['track._trackEvent','Social Action','FB Comment',document.title+' '+location.href]);$.ajax({type:'post',async:true,url:'/webapi/fb_comment_ping',data:{commentid:resp.commentID,href:resp.href,parentCommentID:resp.parentCommentID}});});FB.Event.subscribe('edge.create',function(resp){Nanapi.log('edge.create');_gaq.push(['track._trackEvent','Social Action','FB Like',document.title+' '+location.href]);$.ajax({type:'post',async:true,url:'/webapi/fb_like_ping',data:{href:resp}});});FB.Event.subscribe('edge.create',function(targetUrl){_gaq.push(['track._trackSocial','facebook','like',targetUrl]);});FB.Event.subscribe('edge.remove',function(targetUrl){_gaq.push(['track._trackSocial','facebook','unlike',targetUrl]);});FB.Event.subscribe('message.send',function(targetUrl){_gaq.push(['track._trackSocial','facebook','send',targetUrl]);});};(function(){var e=document.createElement('script');e.async=true;e.src=document.location.protocol+'//connect.facebook.net/ja_JP/all.js';document.getElementById('fb-root').appendChild(e);}());}
if(typeof twttr!='undefined'){twttr.events.bind('tweet',function(event){if(event){var targetUrl;if(event.target&&event.target.nodeName=='IFRAME'){targetUrl=extractParamFromUri(event.target.src,'url');}
_gaq.push(['track._trackSocial','twitter','tweet',targetUrl]);}});}
$(document).on('click','.bindBalloonClose',function(){document.cookie=['balloon=on','; path=/','; domain=.nanapi.jp'].join('');$('.bindBalloon').hide();});$(document).on('click','.bindClickOpenLink',function(){location.href=$(this).data('href');return false;});$(document).on('click','.bindOpenLoginWindow',function(){var url=$(this).data('redirect-url');var type=$(this).data('content-type')?$(this).data('content-type'):'rank_sort';$.ajax({method:"get",dataType:"html",url:"/pages/login_window",data:{u:url,t:type},success:function(html){$('.bindLoginWindow').remove();$('.bindAppendLoginWindow').prepend(html);$('.bindLoginWindowWire').css({left:($(window).width()/2-275)+'px'});$('.bindLoginWindowOverlay').css({height:$('html').outerHeight(true)+'px'});}});return false;});$(window).on('resize',function(){if($('.bindLoginWindow').length>0){$('.bindLoginWindowWire').css({left:($(window).width()/2-275)+'px'});$('.bindLoginWindowOverlay').css({height:$('html').outerHeight(true)+'px'});}});$(document).on('click','.bindCloseLoginWindow',function(){$('.bindLoginWindow').remove();});$(window).on('scroll',function(){var scrollTop=$(this).scrollTop();if($('.bindFixedWayOfSearch').length>0){var startHookElm=$('.bindFixedWayOfSearch').data('start-hook-elm');var startHookTop=$(startHookElm).offset().top;var endHookElm=$('.bindFixedWayOfSearch').data('end-hook-elm');var endHookTop=$(endHookElm).offset().top;if(scrollTop>endHookTop){$(".bindFixedWayOfSearch:visible").fadeOut();}else if(scrollTop>(startHookTop-500)){$(".bindFixedWayOfSearch:hidden").animate({height:"toggle",bottom:"toggle"},{duration:"normal",easing:"linear"});}else{$(".bindFixedWayOfSearch:visible").fadeOut();}}
if($('.bindFixedGlobalHeader').length>0){var hookHeight=$('.bindGlobalHeader').outerHeight();if(scrollTop>hookHeight){$(".bindFixedGlobalHeader:hidden").animate({height:"toggle",bottom:"toggle"},{duration:250,easing:"swing"});$(".bindGlobalHeaderTopIcon:hidden").animate({width:"toggle"},{duration:"normal",easing:"linear"});if($(".bindSearchFormSectionInput:hidden").size()){$(".bindSearchFormSectionToggleIcon:hidden").show();}}else{$(".bindGlobalHeaderTopIcon").fadeOut('normal');$(".bindSearchFormSectionInput").fadeOut('normal');$(".bindSearchFormSectionToggleIcon").fadeOut('normal');$(".bindFixedGlobalHeader:visible").fadeOut();}}
if($('.bindFixedNaviLarge:hidden').length>0){var hookHeight=$('.bindFixedNaviHook').outerHeight();if(scrollTop>hookHeight){$(".bindFixedNaviLarge:hidden").show();$(".bindFixedNavi:hidden").animate({height:"toggle",width:"toggle",bottom:"toggle"},{duration:250,easing:"swing"});}}});$(document).on('click','.bindCloseWayOfSearch',function(){$(this).parent().remove();});$(document).on('change, keyup','.bindLengthForContent',function(){applyBindLengthForContent(this);});$('.bindLengthForContent').each(function(){applyBindLengthForContent(this);});$(document).on('click','.bindAnswerAction',function(){var form=$(this).data('target-content-for');$(form).show();if($(this).data('target-scrolltop-for')){$('html,body').animate({scrollTop:$($(this).data('target-scrolltop-for')).offset().top},'1000');}
$($(this).data('target-focus-for')).focus();});function applyBindLengthForContent(elm){var text=$(elm).val().length;var max_length=$(elm).data('max-length');if(max_length>0){text=max_length-text;}
$($(elm).data('length-for-content-for')).text(text);if(text==max_length||text<0){if(text<0){$($(elm).data('length-for-content-for')).addClass($($(elm).data('length-for-content-for')).data('toggle-class'));}
if($($(elm).data('disabled-button-content-for'))){$($(elm).data('disabled-button-content-for')).removeClass($($(elm).data('disabled-button-content-for')).data('enabled-class'));$($(elm).data('disabled-button-content-for')).addClass($($(elm).data('disabled-button-content-for')).data('disabled-class'));$($(elm).data('disabled-button-content-for')).prop('disabled',true);}}else{$($(elm).data('length-for-content-for')).removeClass($($(elm).data('length-for-content-for')).data('toggle-class'));if($($(elm).data('disabled-button-content-for'))){$($(elm).data('disabled-button-content-for')).removeClass($($(elm).data('disabled-button-content-for')).data('disabled-class'));$($(elm).data('disabled-button-content-for')).addClass($($(elm).data('disabled-button-content-for')).data('enabled-class'));$($(elm).data('disabled-button-content-for')).prop('disabled',false);}}}
$(document).on('click','.bindQuestionRemove',function(){var id=$(this).data('id');if(window.confirm('本当に削除してよろしいですか？')){location.href="http://qa.nanapi.jp/remove/?question_id="+escape(id);}});$(document).on('click','.bindQuestionAnswerRemove',function(){var id=$(this).data('id');var li=$(this).data('delete-for');var ac=$(this).data('action');if(window.confirm('本当に削除してよろしいですか？')){$.ajax({dataType:"json",data:{'id':id},url:"/qa/"+ac,success:function(response){var status=parseInt(response.status);switch(status){case 200:$(li).fadeOut();break;}}});}});$(document).on('click','.bindToggle',function(e){e.stopPropagation();$(document).find($(this).data('toggle-for')).toggle();$(this).toggle();});$(document).on('click','.bindToggleDisplay',function(){$($(this).data('content-for')).toggle();});$(document).on('click','.bindAnswerVoteToggle',function(){var self=this;var id=$(this).data('id');var count=parseInt($($(this).data('count-for')).text());if($($(self).data('text-for')).hasClass($($(self).data('text-for')).data('toggle-class'))){count--;$($(self).data('count-for')).text(count);$($(self).data('text-for')).removeClass($($(self).data('text-for')).data('toggle-class'));}else{count++;$($(self).data('count-for')).text(count);$($(self).data('text-for')).addClass($($(self).data('text-for')).data('toggle-class'));}
$.ajax({dataType:"json",url:"/answers/"+id+"/vote",success:function(response){}});});var notificated=false;$(document).on('click',".bindGlobalMenu > li",function(e){var context=$(this).children('div');if($(context).is(':hidden')){e.stopPropagation();$('.bindGlobalMenu > li > div:visible').hide();$(context).show();}else{$(context).hide();}});$(document).on('click','body',function(){$('.bindGlobalMenu > li > div').hide();});$(document).on('click',".bindToggleNotification",function(){if(!notificated){$.ajax({type:'get',cache:false,url:'/webapi/notification/',dataType:'html',success:function(data){$(".bindMenuNotificationBody").html(data);$(".bindLoadingNotification").hide();}});$(this).removeClass('count').addClass('empty');$(".bindNotificationCount").removeClass('unread').html('');}
notificated=true;});$(document).on('click','.bindToggleOpinionVoteLike',function(){var countup=1
var opinion_vote_id=$(this).data('opinion-vote-id')
if(!$(this).hasClass($(this).data('opinion-vote-toggle-class'))){countup=-1}
$(this).toggleClass($(this).data('opinion-vote-toggle-class'))
var countup_target=$($(this).data('opinion-vote-countup-selector'))
countup_target.html(parseInt(countup_target.html())+countup);$.ajax({type:'post',dataType:"json",url:"/webapi/toggle_opinion_vote_like",data:{"opinion_vote_id":opinion_vote_id}})
_gaq.push(['track._trackEvent',$(this).data('opinion-vote-event-category'),$(this).data('opinion-vote-event-action'),$(this).data('opinion-vote-event-label')]);});if($('.bindAutosize').length>0){$('textarea.bindAutosize').autosize();}
if($('.bindAutoRequest').length>0){NanapiAutoRequest.init('.bindAutoRequest');}
$(document).on('click','.bindOpenLoginWindowEval',function(){if(!Nanapi.authorized()){$('.bindOpenLoginWindow').click();}else{location.href=$(this).data('redirect-url');}});$(document).on('click','.bindPostOpinionComment',function(){var comment=$(".bindOpinionComment").val();var id=$(this).data('id');var after=$(this).data('post-after');$(".bindPostOpinionCommentError").hide();if(!comment){$(".bindPostOpinionCommentError").show().text('コメントを入力して下さい');return false;}
if(comment.length>50){$(".bindPostOpinionCommentError").show().text('50文字以下で入力してください');return false;}
$(this).addClass($(this).data('disabled-class')).removeClass('bindPostOpinionComment');$('.bindOpinionPostLoading').show();$('.bindOpinionCommentForm').hide();$.ajax({type:'post',dataType:"json",url:"/enquetes/vote_comment",data:{"id":id,"comment":comment,"layout":"ajax"},success:function(){$('.bindOpinionPostLoading').hide();$('.bindOpinionShowDetail').show();switch(after){case'reload':location.reload();break;}}})});$(document).on('click','.bindOpinionVote',function(){$($(this).data('opinion-vote-rate-content-for')).attr('value',$(this).data('opinion-vote-rate'));_gaq.push(['track._trackEvent',$(this).data('opinion-vote-event-category'),$(this).data('opinion-vote-event-action'),$(this).data('opinion-vote-event-label')]);$($(this).data('opinion-vote-form-content-for')).submit();$(this).data('opinion-vote-display-content-for')?$($(this).data('opinion-vote-display-content-for')).fadeOut():'';});$(document).on('click','.bindSearchFormSectionToggle',function(){$(".bindSearchFormSection").animate({width:"toggle"},{duration:150,easing:"linear"});$(".bindFixedSearchWordInput:visible").focus();});$(document).on('click','.bindEmbedModalOpen',function(){var id=$(this).data('contentable-id');var type=$(this).data('contentable-type');var point=$(this).data('append-point');$.ajax({method:"get",dataType:"html",url:"/webapi/embed",data:{i:id,t:type},success:function(html){$('.bindLoginWindow').remove();$(point).prepend(html);$('.bindLoginWindowWire').css({left:($(window).width()/2-275)+'px'});$('.bindLoginWindowOverlay').css({height:$('html').outerHeight(true)+'px'});}});});$(document).on('click','.bindFixedNaviClose',function(){$(".bindFixedNavi:visible").animate({height:"toggle",width:"toggle",bottom:"toggle"},{duration:250,easing:"swing"});$(".bindFixedNaviSmall:hidden").show();});$(document).on('click','.bindFixedNaviOpen',function(){$(".bindFixedNaviSmall:visible").hide();$(".bindFixedNavi:hidden").animate({height:"toggle",width:"toggle",bottom:"toggle"},{duration:250,easing:"swing"});});$(document).on('focusout','.bindFixedSearchWordInput',function(){$(".bindSearchFormSection").animate({width:"toggle"},{duration:150,easing:"linear"});});});;$(function(){$(document).on('click','.bindTab',function(){var tabs=$(this).parents('.bindTabs');$('.bindTab',tabs).each(function(){$(this).removeClass($(this).data('tab-toggle-class'));$($(this).data('tab-for')).hide();});$(this).addClass($(this).data('tab-toggle-class'));$($(this).data('tab-for')).show();});window.initBindTabs=function(){$('.bindTabs').each(function(){$('.bindTab',this).each(function(){if($(this).hasClass($(this).data('tab-toggle-class'))){$($(this).data('tab-for')).show();}else{$($(this).data('tab-for')).hide();}});});}});;$(function(){if($('.bindAutoFontSize').length>0){$('.bindAutoFontSize').each(function(){var self=this;var text=$(self).text();var pattern=$(self).data('pattern');$.each(pattern,function(length,size){if(text.length<length){$(self).css({"font-size":size+'px'});return false;}});});}});;$(function(){(function(){if(navigator.userAgent.match(/iPad|iPhone|Android|MSIE 7/))return;var followScrolls=$('.bindFollowScroll');if(followScrolls.length==0)return;followScrolls.each(function(i,elm){$(this).data('follow-scroll-base-offset-top',$(elm).offset().top);$(this).data('follow-scroll-base-offset-adjust-top',$(elm).data('follow-scroll-base-offset-adjust-top')?$(elm).data('follow-scroll-base-offset-adjust-top'):0);$(this).data('follow-scroll-base-width',$(elm).width()+'px');$(this).data('follow-scroll-default-top',$(elm).css('top'));$(this).data('follow-scroll-default-position',$(elm).css('position'));$(this).data('follow-scroll-default-width',$(elm).css('width'));$(this).data('follow-scroll-default-margin-left',$(elm).css('margin-left'));$(this).data('follow-scroll-margin-top',$(elm).data('follow-scroll-margin-top')?$(elm).data('follow-scroll-margin-top'):0);$(this).data('follow-scroll-margin-bottom',$(elm).data('follow-scroll-margin-bottom')?$(elm).data('follow-scroll-margin-bottom'):0);});$(window).on('scroll',function(){var windowHeight=$(window).height();var scrollTop=$(this).scrollTop();followScrolls.each(function(i,elm){var beforePosType=$(elm).data('follow-scroll-position-type');var followScrollType=$(elm).data('follow-scroll-type');var newPosType=null;if($(elm).data('follow-scroll-height-for')){var footerTop=$($(elm).data('follow-scroll-height-for')).offset().top+$($(elm).data('follow-scroll-height-for')).outerHeight();}else if($(elm).data('follow-scroll-footer-for')){var footerTop=$($(elm).data('follow-scroll-footer-for')).offset().top;}else{return false;}
var elmHeight=$(elm).outerHeight(true);var fixedHeaderHeight=$(elm).data('follow-scroll-header-for')&&$($(elm).data('follow-scroll-header-for')).length>0&&$($(elm).data('follow-scroll-header-for')).css('position')=='fixed'?$($(elm).data('follow-scroll-header-for')).outerHeight(true):0;if($(elm).data('follow-scroll-height-add'))elmHeight+=parseInt($(elm).data('follow-scroll-height-add'));if($(elm).data('follow-scroll-height-add-for'))elmHeight+=parseInt($($(elm).data('follow-scroll-height-add-for')).outerHeight(true));switch(true){case followScrollType=='bottom'&&elmHeight>windowHeight:var stickyTop=fixedHeaderHeight-parseInt($(elm).data('follow-scroll-margin-bottom'))-(elmHeight-windowHeight);var elmBottom=$(this).data('follow-scroll-base-offset-top')+elmHeight+parseInt($(elm).data('follow-scroll-margin-bottom'))-parseInt($('html').css('marginTop'));var viewBottom=scrollTop+windowHeight-parseInt($('html').css('marginTop'));if(viewBottom>elmBottom){if(viewBottom>footerTop){beforePosType=null;newPosType='footerConflict';}else{newPosType='following';}}else{newPosType='default';}
break;case followScrollType=='top':default:var stickyTop=fixedHeaderHeight+parseInt($(elm).data('follow-scroll-margin-top'))+parseInt($('html').css('marginTop'));var stickableBaseHeight=stickyTop+elmHeight+parseInt($(elm).data('follow-scroll-margin-top'))+parseInt($(elm).data('follow-scroll-margin-bottom'));var stickable=stickableBaseHeight<windowHeight&&stickableBaseHeight+$(this).data('follow-scroll-base-offset-top')<footerTop;if(stickable&&scrollTop+stickyTop>=parseInt($(elm).data('follow-scroll-base-offset-top'))){if(scrollTop+stickyTop+elmHeight+$(elm).data('follow-scroll-margin-bottom')>footerTop){beforePosType=null;newPosType='footerConflict';}else{newPosType='following';}}else{newPosType='default';}
break;}
if(beforePosType!=newPosType){$(elm).data('follow-scroll-position-type',newPosType);switch(newPosType){case'following':case'footerConflict':var followTop=stickyTop;if(newPosType=='footerConflict'){switch(true){case followScrollType=='bottom'&&elmHeight>windowHeight:followTop-=(viewBottom-footerTop+parseInt($('html').css('marginTop')));break;case followScrollType=='top':default:followTop-=(scrollTop+stickyTop+elmHeight+$(elm).data('follow-scroll-margin-bottom')-footerTop);}}
if(!$(elm).data('prop-element')){var propElm=document.createElement('div');$(propElm).css({'width':$(elm).outerWidth()+'px','height':elmHeight+'px'});$(propElm).css('height',elmHeight+'px');$(elm.parentNode).append(propElm);$(elm).data('prop-element',propElm);}
$(elm).css({'position':'fixed','width':$(elm).data('follow-scroll-base-width'),'top':followTop+'px'});if($(elm).data('follow-scroll-margin-left')){$(elm).css({'margin-left':$(elm).data('follow-scroll-margin-left')});}
break;case'default':if($(elm).data('prop-element')){$($(elm).data('prop-element')).remove();$(elm).data('prop-element',null);}
$(elm).css({'position':$(elm).data('follow-scroll-default-position'),'width':$(elm).data('follow-scroll-default-width'),'top':$(elm).data('follow-scroll-default-top'),'margin-left':$(elm).data('follow-scroll-default-margin-left')});$(elm).data('follow-scroll-base-offset-top',$(elm).offset().top);break;}}});});})();});;function getUrlVars()
{var vars=[],hash;var hashes=window.location.href.slice(window.location.href.indexOf('?')+1).split('&');for(var i=0;i<hashes.length;i++)
{hash=hashes[i].split('=');vars.push(hash[0]);vars[hash[0]]=hash[1];}
return vars;}
$(function(){var _mc=getUrlVars()['_mc'];_gaq.push(['track._trackEvent','MailClick',_mc,location.href]);});;function Activity(){this.initialize.apply(this,arguments);}
Activity.prototype={interval:5000,speed:1000,timer:null,index:0,initialize:function(){},start:function(data,elm){if($("#ticker-container").size()>0&&$('#ticker-container div').length>0){if($('#ticker-container div:eq('+Activity.index+')').css('display')=='none'){$('#ticker-container div:eq('+Activity.index+')').show();}
this.timer=window.setInterval(function(){$('#ticker-container div:eq('+Activity.index+')').fadeOut(this.speed);if(++Activity.index==$('#ticker-container div').length)Activity.index=0;$('#ticker-container div:eq('+Activity.index+')').fadeIn(this.speed);},this.interval);$("#ticker-container > div").hover(Activity.stop,Activity.restart);$("#ticker-container .ticker-control .prev").unbind('click').click(function(){Activity.stop();$('#ticker-container div:eq('+Activity.index+')').hide();if(--Activity.index<0)Activity.index=$('#ticker-container div').length-1;$('#ticker-container div:eq('+Activity.index+')').show();});$("#ticker-container .ticker-control .next").unbind('click').click(function(){Activity.stop();$('#ticker-container div:eq('+Activity.index+')').hide();if(++Activity.index==$('#ticker-container div').length)Activity.index=0;$('#ticker-container div:eq('+Activity.index+')').show();});}},stop:function(){if(Activity.timer!=null){clearInterval(Activity.timer);Activity.timer=null;}},restart:function(){if(Activity.timer==null){Activity.start();}}};var Activity=new Activity();;$(function(){(function(){if(Nanapi.cookie('_NANAPI[view]')=='pc'){$('.body-inner').prepend('<div class="spviewmode-section"><a href="http://nanapi.jp/set_iphone" class="btn-spviewmode"><div class="body"><span>スマートフォン版 nanapi はこちらから</span><span><b>スマートフォン版に切替</b></span></div></a></div>');}})();});;
/*!
 * Based on the bootstrap-affix.js v2.3.1, I changed this source.
 */

/*! ==========================================================
 * bootstrap-affix.js v2.3.1
 * http://twitter.github.com/bootstrap/javascript.html#affix
 * ==========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */
!function($){"use strict";var Affix=function(element,options){if($.browser.msie&&$.browser.version<=7)return
if(navigator.userAgent.match(/iPad|iPhone|Android|MSIE 7/))return
if(options.content_main!=void 0&&$(options.content_main).height()<=$(element).height())return
if(options.content_main!=void 0&&$(options.content_main).height()<=$(window).height())return
if($(element).height()<=$(window).height()){delete options.affix_for_down
delete options.style.stopBottom}
this.scroll_pos=0
if(options.affix_for_down!=void 0)this.affix_for_down=$(options.affix_for_down)
if(options.affix_for_up!=void 0)this.affix_for_up=$(options.affix_for_up)
if(options.affix_for_down!=void 0&&options.affix_for_up!=void 0){this.mode='affix_both'}else{this.mode='deafult'}
options.style.affix=$.extend((options.style.affix==void 0)?{}:options.style.affix,options.style.margin)
options.style.affixDown=$.extend((options.style.affixDown==void 0)?{}:options.style.affixDown,options.style.margin)
options.style.affixUp=$.extend((options.style.affixUp==void 0)?{}:options.style.affixUp,options.style.margin)
options.style.stopBottom=$.extend((options.style.stopBottom==void 0)?{}:options.style.stopBottom,options.style.margin)
options.style.stopTop=$.extend((options.style.stopTop==void 0)?{}:options.style.stopTop,options.style.margin)
options.style.stay=$.extend((options.style.stay==void 0)?{}:options.style.stay,options.style.margin)
this.options=$.extend({},$.fn.affix.defaults,options)
this.$window=$(window).on('scroll.affix.data-api',$.proxy(this.checkPosition,this)).on('click.affix.data-api',$.proxy(function(){setTimeout($.proxy(this.checkPosition,this),1)},this))
this.$element=$(element)
if(this.mode=='affix_both'){this.affix_stop_top_pos=this.affix_for_up.offset().top}else{this.$element.offset().top}
this.$element.css(options.style.defaults)
this.checkPosition()}
Affix.prototype.checkPosition=function(){if(!this.$element.is(':visible'))return
var scrollHeight=$(document).height(),scrollTop=this.$window.scrollTop(),position=this.$element.offset(),offset=this.options.offset,offsetBottom=offset.bottom,offsetTop=offset.top,reset='affix affixDown affixUp stopBottom stopTop',status
if(typeof offset!='object')offsetBottom=offsetTop=offset
if(typeof offsetTop=='function')offsetTop=offset.top()
if(typeof offsetBottom=='function')offsetBottom=offset.bottom()
if(this.mode=='affix_both'){if(scrollTop>this.scroll_pos){if(this.$element.offset().top+this.$element.height()>=$(document).height()-offsetBottom){status='stopBottom'}else if(scrollTop+this.$window.height()>=$(document).height()-offsetBottom){status='stopBottom'}else if(scrollTop+this.$window.height()>=this.affix_for_down.offset().top+this.affix_for_down.height()+((this.options.style.affixDown.bottom!=void 0&&parseInt(this.options.style.affixDown.bottom)>0)?parseInt(this.options.style.affixDown.bottom):0)){status='affixDown'}else{status='stay'}}else if(scrollTop>0){if(scrollTop<this.affix_stop_top_pos){status='stopTop'}else if(scrollTop<=this.affix_for_up.offset().top){status='affixUp'}else{status='stay'}}
this.scroll_pos=scrollTop
this.element_top=this.$element.offset().top
if(this.status===status)return
this.status=status
this.$element.removeAttr('style').css(this.options.style.defaults)
if(status=='stay'){this.$element.removeClass(reset).css($.extend({'position':'absolute','top':this.element_top,'bottom':'auto'},this.options.style.stay))
return}else{switch(status){case'affixUp':if(this.affix_for_up.offset().top>this.$element.offset().top){this.$element.removeClass(reset).css($.extend({'position':'fixed','top':0-(this.affix_for_up.offset().top-this.$element.offset().top),'bottom':'auto'},this.options.style.affixUp))}else{this.$element.removeClass(reset).css($.extend({'position':'fixed','top':0,'bottom':'auto'},this.options.style.affixUp))}
break;case'affixDown':this.$element.removeClass(reset).css($.extend({'position':'fixed','top':'auto','bottom':0},this.options.style.affixDown))
break;case'stopBottom':if(this.options.style.affixDown.bottom!=void 0&&parseInt(this.options.style.affixDown.bottom)>0){this.$element.removeClass(reset).css($.extend({'position':'absolute','top':'auto','bottom':offsetBottom+parseInt(this.options.style.affixDown.bottom)},this.options.style.stopBottom))}else{this.$element.removeClass(reset).css($.extend({'position':'absolute','top':'auto','bottom':offsetBottom},this.options.style.stopBottom))}
break;}
this.unpin=status=='stop-bottom'?position.top-scrollTop:null
this.$element.removeClass(reset).addClass(status)
this.element_top=this.$element.offset().top}}else{if(this.$element.offset().top+this.$element.height()>=$(document).height()-offsetBottom){status='stopBottom'}else if(scrollTop+this.$element.height()>=$(document).height()-offsetBottom){status='stopBottom'}else if(offsetTop!=null&&scrollTop<=offsetTop){status='stopTop'}else{status='affix'}
if(this.status===status)return
this.affixed=status
this.$element.removeAttr('style').css(this.options.style.defaults)
switch(status){case'affix':this.$element.removeClass(reset).css($.extend({'position':'fixed','top':0,'bottom':'auto'},this.options.style.affixDown))
break;case'stopBottom':if(this.options.style.affixDown.bottom!=void 0&&parseInt(this.options.style.affixDown.bottom)>0){this.$element.removeClass(reset).css($.extend({'position':'absolute','top':'auto','bottom':offsetBottom+parseInt(this.options.style.affixDown.bottom)},this.options.style.stopBottom))}else{this.$element.removeClass(reset).css($.extend({'position':'absolute','top':'auto','bottom':offsetBottom},this.options.style.stopBottom))}
break;}
this.$element.removeClass(reset).addClass(status)}}
var old=$.fn.affix
$.fn.affix=function(option){return this.each(function(){var $this=$(this),data=$this.data('affix'),options=typeof option=='object'&&option
if(!data)$this.data('affix',(data=new Affix(this,options)))
if(typeof option=='string')data[option]()})}
$.fn.affix.Constructor=Affix
$.fn.affix.defaults={offset:0}
$.fn.affix.noConflict=function(){$.fn.affix=old
return this}
$(window).on('load',function(){$('[data-spy="affix"]').each(function(){var $spy=$(this),data=$spy.data()
data.offset=data.offset||{}
data.offsetBottom&&(data.offset.bottom=data.offsetBottom)
data.offsetTop&&(data.offset.top=data.offsetTop)
$spy.affix(data)})})}(window.jQuery);;$(function(){if(document.URL=="http://nanapi.jp/"&&$(".bindSearchWordInput").size()>0){$(".bindSearchWordInput").selectRange($(".bindSearchWordInput").val().length,$(".bindSearchWordInput").val().length);}
var cache_autocomplete={};$(".bindSearchWordInput").autocomplete({source:function(request,response){var term=request.term;if(term in cache_autocomplete){response(cache_autocomplete[term]);return;}
$.ajax({url:"/rapid/searches/autocomplete",dataType:"json",data:{term:encodeURIComponent(request.term)},success:function(data){cache_autocomplete[term]=data;response(data);}});},select:function(event,ui){$(".bindSearchWordInput").val(ui.item.value);_gaq.push(['track._trackEvent','JPSearch','clickSuggestKeyword',ui.item.value]);window.location=ui.item.url;},search:function(event,ui){if(event.keyCode==32){return false;}},minLength:1,delay:0,appendTo:".bindSuggestContainer"}).keyup(function(event){if(event.keyCode==13){$(this).autocomplete("search");}});});$.fn.selectRange=function(start,end){return this.each(function(){if(this.setSelectionRange){this.focus();this.setSelectionRange(start,end);}else if(this.createTextRange){var range=this.createTextRange();range.collapse(true);range.moveEnd('character',end);range.moveStart('character',start);range.select();}});};$(document).on("focus",".bindSearchWordInput",function(){_gaq.push(['track._trackEvent','JPSearch','focus']);});$(document).on("submit",".bindSearchWord",function(){_gaq.push(['track._trackEvent','JPSearch','submit',$(".bindSearchWordInput").val()]);url='/search/?q='+encodeURIComponent($(".bindSearchWordInput").val().replace("/","／"));document.location=url;return false;});$(document).on("focus",".bindFixedSearchWordInput",function(){_gaq.push(['track._trackEvent','JPSearch','focus','fixed']);});$(document).on("submit",".bindSearchWordFixed",function(){_gaq.push(['track._trackEvent','JPSearch','submit',$(".bindFixedSearchWordInput").val()]);url='/search/?q='+encodeURIComponent($(".bindFixedSearchWordInput").val().replace("/","／"));document.location=url;return false;});;;
/*!
 jQuery Autosize v1.16.9
 (c) 2013 Jack Moore - jacklmoore.com
 updated: 2013-05-20
 license: http://www.opensource.org/licenses/mit-license.php
*/
(function($){var
defaults={className:'autosizejs',append:'',callback:false},hidden='hidden',borderBox='border-box',lineHeight='lineHeight',supportsScrollHeight,copy='<textarea tabindex="-1" style="position:absolute; top:-999px; left:0; right:auto; bottom:auto; border:0; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden;"/>',copyStyle=['fontFamily','fontSize','fontWeight','fontStyle','letterSpacing','textTransform','wordSpacing','textIndent'],oninput='oninput',onpropertychange='onpropertychange',mirrored,mirror=$(copy).data('autosize',true)[0];mirror.style.lineHeight='99px';if($(mirror).css(lineHeight)==='99px'){copyStyle.push(lineHeight);}
mirror.style.lineHeight='';$.fn.autosize=function(options){options=$.extend({},defaults,options||{});if(mirror.parentNode!==document.body){$(document.body).append(mirror);mirror.value="\n\n\n";mirror.scrollTop=9e4;supportsScrollHeight=mirror.scrollHeight===mirror.scrollTop+mirror.clientHeight;}
return this.each(function(){var
ta=this,$ta=$(ta),minHeight,active,resize,boxOffset=0,callback=$.isFunction(options.callback);if($ta.data('autosize')){return;}
if($ta.css('box-sizing')===borderBox||$ta.css('-moz-box-sizing')===borderBox||$ta.css('-webkit-box-sizing')===borderBox){boxOffset=$ta.outerHeight()-$ta.height();}
minHeight=Math.max(parseInt($ta.css('minHeight'),10)-boxOffset,$ta.height());resize=($ta.css('resize')==='none'||$ta.css('resize')==='vertical')?'none':'horizontal';$ta.css({overflow:hidden,overflowY:hidden,wordWrap:'break-word',resize:resize}).data('autosize',true);function initMirror(){mirrored=ta;mirror.className=options.className;$.each(copyStyle,function(i,val){mirror.style[val]=$ta.css(val);});}
function adjust(){var height,overflow,original;if(mirrored!==ta){initMirror();}
if(!active){active=true;mirror.value=ta.value+options.append;mirror.style.overflowY=ta.style.overflowY;original=parseInt(ta.style.height,10);mirror.style.width=Math.max($ta.width(),0)+'px';if(supportsScrollHeight){height=mirror.scrollHeight;}else{mirror.scrollTop=0;mirror.scrollTop=9e4;height=mirror.scrollTop;}
var maxHeight=parseInt($ta.css('maxHeight'),10);maxHeight=maxHeight&&maxHeight>0?maxHeight:9e4;if(height>maxHeight){height=maxHeight;overflow='scroll';}else if(height<minHeight){height=minHeight;}
height+=boxOffset;ta.style.overflowY=overflow||hidden;if(original!==height){ta.style.height=height+'px';if(callback){options.callback.call(ta,ta);}}
setTimeout(function(){active=false;},1);}}
if(onpropertychange in ta){if(oninput in ta){ta[oninput]=ta.onkeyup=adjust;}else{ta[onpropertychange]=adjust;}}else{ta[oninput]=adjust;}
$(window).on('resize',function(){active=false;adjust();});$ta.on('autosize',function(){active=false;adjust();});adjust();});};}(window.jQuery||window.Zepto));;(function($){var oHover=$.fn.hover;var dHover=function(mEnter,mLeave,fDelay,eDelay){return $(this).each(function(){var t;oHover.call($(this),function(e){if(t){t=clearTimeout(t);}else{var c=this;t=setTimeout(function(){t=undefined;mEnter.call(c,e);},fDelay);}},function(e){if(t){t=clearTimeout(t);}else{var c=this;t=setTimeout(function(){t=undefined;mLeave.call(c,e);},eDelay);}});});};$.fn.hoverDelay=function(mEnter,mLeave,fDelay,eDelay){dHover.call(this,mEnter,mLeave,fDelay,eDelay);};})(jQuery);;(function($){$.mouseStopDelay=0;$.event.special.mouseStop={setup:function(data){$(this).data('mouseStop',{delay:data}).bind('mouseenter.mouseStop',mouseenterHandler).bind('mouseleave.mouseStop',mouseleaveHandler);},teardown:function(){$(this).removeData('mouseStop').unbind('.mouseStop');}};function mouseenterHandler(){if(typeof this.timeout==='undefined'){this.timeout=null;}
var elem=$(this),data=elem.data('mouseStop'),delay=data.delay||$.mouseStopDelay;elem.bind('mousemove.mouseStop',function(){clearTimeout(this.timeout);this.timeout=setTimeout(function(){elem.trigger('mouseStop');},delay);});};function mouseleaveHandler(){var elem=$(this);elem.unbind('mousemove.mouseStop');clearTimeout(this.timeout);};$.fn.mouseStop=function(data,fn){if(fn==null){fn=data;data=null;}
return arguments.length>0?this.bind('mouseStop',data,fn):this.trigger('mouseStop');};})(jQuery);;
/*!
 * jquery.scrolldepth.js | v0.1.2
 * Copyright (c) 2012 Rob Flaherty (@robflaherty)
 * Licensed under the MIT and GPL licenses.
 */
;(function($,window,document,undefined){"use strict";var defaults={elements:[],minHeight:0,offset:0,percentage:true,profile:null,testing:false},$window=$(window),cache=[];$.scrollDepth=function(options){var startTime=+new Date;options=$.extend({},defaults,options);if($(document).height()<options.minHeight){return;}
sendEvent('Percentage','Baseline');function sendEvent(action,label,timing){if(!options.testing){var profile=options.profile?options.profile+'.':'';_gaq.push([profile+'_trackEvent','Scroll Depth',action,label,1,true]);if(arguments.length>2){_gaq.push([profile+'_trackTiming','Scroll Depth',action,timing,label,100]);}}else{$('#console').html(action+': '+label);}}
function calculateMarks(docHeight){return{'25%':parseInt(docHeight*0.25,10),'50%':parseInt(docHeight*0.50,10),'75%':parseInt(docHeight*0.75,10),'100%':docHeight-1};}
function checkMarks(marks,scrollDistance,timing){$.each(marks,function(key,val){if($.inArray(key,cache)===-1&&scrollDistance>=val){sendEvent('Percentage',key,timing);cache.push(key);}});}
function checkElements(elements,scrollDistance,timing){$.each(elements,function(index,elem){if($.inArray(elem,cache)===-1&&$(elem).length){if(scrollDistance>=$(elem).offset().top){sendEvent('Elements',elem,timing);cache.push(elem);}}});}
$window.on('scroll.scrollDepth',function(){var docHeight=$(document).height(),winHeight=window.innerHeight?window.innerHeight:$window.height(),scrollDistance=$window.scrollTop()+winHeight,offset=parseInt(winHeight*(options.offset/100),10),marks=calculateMarks(docHeight),timing=+new Date-startTime;if(cache.length>=4+options.elements.length){$window.off('scroll.scrollDepth');return;}
if(options.elements){checkElements(options.elements,scrollDistance,timing);}
if(options.percentage){checkMarks(marks,scrollDistance,timing);}});};})(jQuery,window,document);;
/*! jQuery UI - v1.8.23 - 2012-08-15
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.core.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a,b){function c(b,c){var e=b.nodeName.toLowerCase();if("area"===e){var f=b.parentNode,g=f.name,h;return!b.href||!g||f.nodeName.toLowerCase()!=="map"?!1:(h=a("img[usemap=#"+g+"]")[0],!!h&&d(h))}return(/input|select|textarea|button|object/.test(e)?!b.disabled:"a"==e?b.href||c:c)&&d(b)}function d(b){return!a(b).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};if(a.ui.version)return;a.extend(a.ui,{version:"1.8.23",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({propAttr:a.fn.prop||a.fn.attr,_focus:a.fn.focus,focus:function(b,c){return typeof b=="number"?this.each(function(){var d=this;setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;return a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?b=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):b=this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length){var d=a(this[0]),e,f;while(d.length&&d[0]!==document){e=d.css("position");if(e==="absolute"||e==="relative"||e==="fixed"){f=parseInt(d.css("zIndex"),10);if(!isNaN(f)&&f!==0)return f}d=d.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function h(b,c,d,f){return a.each(e,function(){c-=parseFloat(a.curCSS(b,"padding"+this,!0))||0,d&&(c-=parseFloat(a.curCSS(b,"border"+this+"Width",!0))||0),f&&(c-=parseFloat(a.curCSS(b,"margin"+this,!0))||0)}),c}var e=d==="Width"?["Left","Right"]:["Top","Bottom"],f=d.toLowerCase(),g={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?g["inner"+d].call(this):this.each(function(){a(this).css(f,h(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return typeof b!="number"?g["outer"+d].call(this,b):this.each(function(){a(this).css(f,h(this,b,!0,c)+"px")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));c.offsetHeight,a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),a.support.minHeight=c.offsetHeight===100,a.support.selectstart="onselectstart"in c,b.removeChild(c).style.display="none"}),a.curCSS||(a.curCSS=a.css),a.extend(a.ui,{plugin:{add:function(b,c,d){var e=a.ui[b].prototype;for(var f in d)e.plugins[f]=e.plugins[f]||[],e.plugins[f].push([c,d[f]])},call:function(a,b,c){var d=a.plugins[b];if(!d||!a.element[0].parentNode)return;for(var e=0;e<d.length;e++)a.options[d[e][0]]&&d[e][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(b,c){if(a(b).css("overflow")==="hidden")return!1;var d=c&&c==="left"?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,g)}})})(jQuery);;
/*! jQuery UI - v1.8.23 - 2012-08-15
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.widget.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a,b){if(a.cleanData){var c=a.cleanData;a.cleanData=function(b){for(var d=0,e;(e=b[d])!=null;d++)try{a(e).triggerHandler("remove")}catch(f){}c(b)}}else{var d=a.fn.remove;a.fn.remove=function(b,c){return this.each(function(){return c||(!b||a.filter(b,[this]).length)&&a("*",this).add([this]).each(function(){try{a(this).triggerHandler("remove")}catch(b){}}),d.call(a(this),b,c)})}}a.widget=function(b,c,d){var e=b.split(".")[0],f;b=b.split(".")[1],f=e+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][f]=function(c){return!!a.data(c,b)},a[e]=a[e]||{},a[e][b]=function(a,b){arguments.length&&this._createWidget(a,b)};var g=new c;g.options=a.extend(!0,{},g.options),a[e][b].prototype=a.extend(!0,g,{namespace:e,widgetName:b,widgetEventPrefix:a[e][b].prototype.widgetEventPrefix||b,widgetBaseClass:f},d),a.widget.bridge(b,a[e][b])},a.widget.bridge=function(c,d){a.fn[c]=function(e){var f=typeof e=="string",g=Array.prototype.slice.call(arguments,1),h=this;return e=!f&&g.length?a.extend.apply(null,[!0,e].concat(g)):e,f&&e.charAt(0)==="_"?h:(f?this.each(function(){var d=a.data(this,c),f=d&&a.isFunction(d[e])?d[e].apply(d,g):d;if(f!==d&&f!==b)return h=f,!1}):this.each(function(){var b=a.data(this,c);b?b.option(e||{})._init():a.data(this,c,new d(e,this))}),h)}},a.Widget=function(a,b){arguments.length&&this._createWidget(a,b)},a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(b,c){a.data(c,this.widgetName,this),this.element=a(c),this.options=a.extend(!0,{},this.options,this._getCreateOptions(),b);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled")},widget:function(){return this.element},option:function(c,d){var e=c;if(arguments.length===0)return a.extend({},this.options);if(typeof c=="string"){if(d===b)return this.options[c];e={},e[c]=d}return this._setOptions(e),this},_setOptions:function(b){var c=this;return a.each(b,function(a,b){c._setOption(a,b)}),this},_setOption:function(a,b){return this.options[a]=b,a==="disabled"&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+"ui-state-disabled").attr("aria-disabled",b),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(b,c,d){var e,f,g=this.options[b];d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent;if(f)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.call(this.element[0],c,d)===!1||c.isDefaultPrevented())}}})(jQuery);;
/*! jQuery UI - v1.8.23 - 2012-08-15
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.position.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a,b){a.ui=a.ui||{};var c=/left|center|right/,d=/top|center|bottom/,e="center",f={},g=a.fn.position,h=a.fn.offset;a.fn.position=function(b){if(!b||!b.of)return g.apply(this,arguments);b=a.extend({},b);var h=a(b.of),i=h[0],j=(b.collision||"flip").split(" "),k=b.offset?b.offset.split(" "):[0,0],l,m,n;return i.nodeType===9?(l=h.width(),m=h.height(),n={top:0,left:0}):i.setTimeout?(l=h.width(),m=h.height(),n={top:h.scrollTop(),left:h.scrollLeft()}):i.preventDefault?(b.at="left top",l=m=0,n={top:b.of.pageY,left:b.of.pageX}):(l=h.outerWidth(),m=h.outerHeight(),n=h.offset()),a.each(["my","at"],function(){var a=(b[this]||"").split(" ");a.length===1&&(a=c.test(a[0])?a.concat([e]):d.test(a[0])?[e].concat(a):[e,e]),a[0]=c.test(a[0])?a[0]:e,a[1]=d.test(a[1])?a[1]:e,b[this]=a}),j.length===1&&(j[1]=j[0]),k[0]=parseInt(k[0],10)||0,k.length===1&&(k[1]=k[0]),k[1]=parseInt(k[1],10)||0,b.at[0]==="right"?n.left+=l:b.at[0]===e&&(n.left+=l/2),b.at[1]==="bottom"?n.top+=m:b.at[1]===e&&(n.top+=m/2),n.left+=k[0],n.top+=k[1],this.each(function(){var c=a(this),d=c.outerWidth(),g=c.outerHeight(),h=parseInt(a.curCSS(this,"marginLeft",!0))||0,i=parseInt(a.curCSS(this,"marginTop",!0))||0,o=d+h+(parseInt(a.curCSS(this,"marginRight",!0))||0),p=g+i+(parseInt(a.curCSS(this,"marginBottom",!0))||0),q=a.extend({},n),r;b.my[0]==="right"?q.left-=d:b.my[0]===e&&(q.left-=d/2),b.my[1]==="bottom"?q.top-=g:b.my[1]===e&&(q.top-=g/2),f.fractions||(q.left=Math.round(q.left),q.top=Math.round(q.top)),r={left:q.left-h,top:q.top-i},a.each(["left","top"],function(c,e){a.ui.position[j[c]]&&a.ui.position[j[c]][e](q,{targetWidth:l,targetHeight:m,elemWidth:d,elemHeight:g,collisionPosition:r,collisionWidth:o,collisionHeight:p,offset:k,my:b.my,at:b.at})}),a.fn.bgiframe&&c.bgiframe(),c.offset(a.extend(q,{using:b.using}))})},a.ui.position={fit:{left:function(b,c){var d=a(window),e=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft();b.left=e>0?b.left-e:Math.max(b.left-c.collisionPosition.left,b.left)},top:function(b,c){var d=a(window),e=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop();b.top=e>0?b.top-e:Math.max(b.top-c.collisionPosition.top,b.top)}},flip:{left:function(b,c){if(c.at[0]===e)return;var d=a(window),f=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft(),g=c.my[0]==="left"?-c.elemWidth:c.my[0]==="right"?c.elemWidth:0,h=c.at[0]==="left"?c.targetWidth:-c.targetWidth,i=-2*c.offset[0];b.left+=c.collisionPosition.left<0?g+h+i:f>0?g+h+i:0},top:function(b,c){if(c.at[1]===e)return;var d=a(window),f=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop(),g=c.my[1]==="top"?-c.elemHeight:c.my[1]==="bottom"?c.elemHeight:0,h=c.at[1]==="top"?c.targetHeight:-c.targetHeight,i=-2*c.offset[1];b.top+=c.collisionPosition.top<0?g+h+i:f>0?g+h+i:0}}},a.offset.setOffset||(a.offset.setOffset=function(b,c){/static/.test(a.curCSS(b,"position"))&&(b.style.position="relative");var d=a(b),e=d.offset(),f=parseInt(a.curCSS(b,"top",!0),10)||0,g=parseInt(a.curCSS(b,"left",!0),10)||0,h={top:c.top-e.top+f,left:c.left-e.left+g};"using"in c?c.using.call(b,h):d.css(h)},a.fn.offset=function(b){var c=this[0];return!c||!c.ownerDocument?null:b?a.isFunction(b)?this.each(function(c){a(this).offset(b.call(this,c,a(this).offset()))}):this.each(function(){a.offset.setOffset(this,b)}):h.call(this)}),a.curCSS||(a.curCSS=a.css),function(){var b=document.getElementsByTagName("body")[0],c=document.createElement("div"),d,e,g,h,i;d=document.createElement(b?"div":"body"),g={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},b&&a.extend(g,{position:"absolute",left:"-1000px",top:"-1000px"});for(var j in g)d.style[j]=g[j];d.appendChild(c),e=b||document.documentElement,e.insertBefore(d,e.firstChild),c.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",h=a(c).offset(function(a,b){return b}).offset(),d.innerHTML="",e.removeChild(d),i=h.top+h.left+(b?2e3:0),f.fractions=i>21&&i<22}()})(jQuery);;
/*! jQuery UI - v1.8.23 - 2012-08-15
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.autocomplete.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a,b){var c=0;a.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var b=this,c=this.element[0].ownerDocument,d;this.isMultiLine=this.element.is("textarea"),this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(c){if(b.options.disabled||b.element.propAttr("readOnly"))return;d=!1;var e=a.ui.keyCode;switch(c.keyCode){case e.PAGE_UP:b._move("previousPage",c);break;case e.PAGE_DOWN:b._move("nextPage",c);break;case e.UP:b._keyEvent("previous",c);break;case e.DOWN:b._keyEvent("next",c);break;case e.ENTER:case e.NUMPAD_ENTER:b.menu.active&&(d=!0,c.preventDefault());case e.TAB:if(!b.menu.active)return;b.menu.select(c);break;case e.ESCAPE:b.element.val(b.term),b.close(c);break;default:clearTimeout(b.searching),b.searching=setTimeout(function(){b.term!=b.element.val()&&(b.selectedItem=null,b.search(null,c))},b.options.delay)}}).bind("keypress.autocomplete",function(a){d&&(d=!1,a.preventDefault())}).bind("focus.autocomplete",function(){if(b.options.disabled)return;b.selectedItem=null,b.previous=b.element.val()}).bind("blur.autocomplete",function(a){if(b.options.disabled)return;clearTimeout(b.searching),b.closing=setTimeout(function(){b.close(a),b._change(a)},150)}),this._initSource(),this.menu=a("<ul></ul>").addClass("ui-autocomplete").appendTo(a(this.options.appendTo||"body",c)[0]).mousedown(function(c){var d=b.menu.element[0];a(c.target).closest(".ui-menu-item").length||setTimeout(function(){a(document).one("mousedown",function(c){c.target!==b.element[0]&&c.target!==d&&!a.ui.contains(d,c.target)&&b.close()})},1),setTimeout(function(){clearTimeout(b.closing)},13)}).menu({focus:function(a,c){var d=c.item.data("item.autocomplete");!1!==b._trigger("focus",a,{item:d})&&/^key/.test(a.originalEvent.type)&&b.element.val(d.value)},selected:function(a,d){var e=d.item.data("item.autocomplete"),f=b.previous;b.element[0]!==c.activeElement&&(b.element.focus(),b.previous=f,setTimeout(function(){b.previous=f,b.selectedItem=e},1)),!1!==b._trigger("select",a,{item:e})&&b.element.val(e.value),b.term=b.element.val(),b.close(a),b.selectedItem=e},blur:function(a,c){b.menu.element.is(":visible")&&b.element.val()!==b.term&&b.element.val(b.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),a.fn.bgiframe&&this.menu.element.bgiframe(),b.beforeunloadHandler=function(){b.element.removeAttr("autocomplete")},a(window).bind("beforeunload",b.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),a(window).unbind("beforeunload",this.beforeunloadHandler),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments),b==="source"&&this._initSource(),b==="appendTo"&&this.menu.element.appendTo(a(c||"body",this.element[0].ownerDocument)[0]),b==="disabled"&&c&&this.xhr&&this.xhr.abort()},_initSource:function(){var b=this,c,d;a.isArray(this.options.source)?(c=this.options.source,this.source=function(b,d){d(a.ui.autocomplete.filter(c,b.term))}):typeof this.options.source=="string"?(d=this.options.source,this.source=function(c,e){b.xhr&&b.xhr.abort(),b.xhr=a.ajax({url:d,data:c,dataType:"json",success:function(a,b){e(a)},error:function(){e([])}})}):this.source=this.options.source},search:function(a,b){a=a!=null?a:this.element.val(),this.term=this.element.val();if(a.length<this.options.minLength)return this.close(b);clearTimeout(this.closing);if(this._trigger("search",b)===!1)return;return this._search(a)},_search:function(a){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:a},this._response())},_response:function(){var a=this,b=++c;return function(d){b===c&&a.__response(d),a.pending--,a.pending||a.element.removeClass("ui-autocomplete-loading")}},__response:function(a){!this.options.disabled&&a&&a.length?(a=this._normalize(a),this._suggest(a),this._trigger("open")):this.close()},close:function(a){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",a))},_change:function(a){this.previous!==this.element.val()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return typeof b=="string"?{label:b,value:b}:a.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(b){var c=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(c,b),this.menu.deactivate(),this.menu.refresh(),c.show(),this._resizeMenu(),c.position(a.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new a.Event("mouseover"))},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var d=this;a.each(c,function(a,c){d._renderItem(b,c)})},_renderItem:function(b,c){return a("<li></li>").data("item.autocomplete",c).append(a("<a></a>").text(c.label)).appendTo(b)},_move:function(a,b){if(!this.menu.element.is(":visible")){this.search(null,b);return}if(this.menu.first()&&/^previous/.test(a)||this.menu.last()&&/^next/.test(a)){this.element.val(this.term),this.menu.deactivate();return}this.menu[a](b)},widget:function(){return this.menu.element},_keyEvent:function(a,b){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(a,b),b.preventDefault()}}),a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(b,c){var d=new RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return d.test(a.label||a.value||a)})}})})(jQuery),function(a){a.widget("ui.menu",{_create:function(){var b=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(c){if(!a(c.target).closest(".ui-menu-item a").length)return;c.preventDefault(),b.select(c)}),this.refresh()},refresh:function(){var b=this,c=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");c.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(c){b.activate(c,a(this).parent())}).mouseleave(function(){b.deactivate()})},activate:function(a,b){this.deactivate();if(this.hasScroll()){var c=b.offset().top-this.element.offset().top,d=this.element.scrollTop(),e=this.element.height();c<0?this.element.scrollTop(d+c):c>=e&&this.element.scrollTop(d+c-e+b.height())}this.active=b.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",a,{item:b})},deactivate:function(){if(!this.active)return;this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null},next:function(a){this.move("next",".ui-menu-item:first",a)},previous:function(a){this.move("prev",".ui-menu-item:last",a)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(a,b,c){if(!this.active){this.activate(c,this.element.children(b));return}var d=this.active[a+"All"](".ui-menu-item").eq(0);d.length?this.activate(c,d):this.activate(c,this.element.children(b))},nextPage:function(b){if(this.hasScroll()){if(!this.active||this.last()){this.activate(b,this.element.children(".ui-menu-item:first"));return}var c=this.active.offset().top,d=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c-d+a(this).height();return b<10&&b>-10});e.length||(e=this.element.children(".ui-menu-item:last")),this.activate(b,e)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(b){if(this.hasScroll()){if(!this.active||this.first()){this.activate(b,this.element.children(".ui-menu-item:last"));return}var c=this.active.offset().top,d=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c+d-a(this).height();return b<10&&b>-10});e.length||(e=this.element.children(".ui-menu-item:first")),this.activate(b,e)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[a.fn.prop?"prop":"attr"]("scrollHeight")},select:function(a){this._trigger("selected",a,{item:this.active})}})}(jQuery);;
